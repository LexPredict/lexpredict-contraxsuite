{% extends "admin/change_form.html" %}
{% load static project_tags %}

{% block extrajs %}
  {{ block.super }}
  {% include "../../document/field_combobox.html" %}

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js" style="text/javascrypt"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.1.1/jquery-confirm.min.js" style="text/javascrypt"></script>

  <script type="text/javascript">
    $(document).ready(function () {
      new FieldFilter({
         'mainSelect': 'select#id_document_type',
         'fieldsByDoctype': {{ fields_by_doctype | js }},
         'sourceSelectList': 'id_user_fields_from',
         'destSelectList': 'id_user_fields_to',
         'shouldMonitorItemsChanged': true,
         'onValueChanged': function (dt, isInit) {}
         });
    });

  </script>
{% endblock %}

{% block content %}
    <div class="alert alert-block alert-warning">
        {% if adminform.form.instance.pk %}
            <b>To test the notification rendering leave it disabled
                and open one of the following links in separate browser tabs:</b>
            <ul>
                <li><a href="{% url 'notifications:render-notification' adminform.form.instance.pk 'html' %}">HTML
                    version</a></li>
                <li><a href="{% url 'notifications:render-notification' adminform.form.instance.pk 'txt' %}">text
                    version</a></li>
            </ul>

        {% else %}
            <b>To generate links for testing the notification rendering uncheck "enabled" and click "Save and continue".
            </b>
        {% endif %}
        <br/><b>Email templates and images are customizable via file-browser.
          See: <a href="{% url 'filebrowser:fb_browse' %}?dir=notification_templates">Tasks / Browse/Upload Documents /
        notification_templates</a></b>
    </div>
    {{ block.super }}
{% endblock %}