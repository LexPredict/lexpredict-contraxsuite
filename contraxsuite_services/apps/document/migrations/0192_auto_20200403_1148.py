# Generated by Django 2.2.10 on 2020-03-23 15:51

from django.db import migrations


def do_migrate(apps, schema_editor):
    ReviewStatus = apps.get_model('common', 'ReviewStatus')
    ReviewStatus.objects.get_or_create(
        code='awaiting_qa',
        defaults=dict(name='Awaiting QA',
                      code='awaiting_qa',
                      order=4,
                      group_id=2,
                      is_active=True))
    ReviewStatus.objects.filter(code='completed').update(order=5)
    ReviewStatus.objects.filter(code='excluded').update(order=6)


def undo_migrate(apps, schema_editor):
    ReviewStatus = apps.get_model('common', 'ReviewStatus')
    ReviewStatus.objects.filter(code='awaiting_qa').delete()
    ReviewStatus.objects.filter(code='completed').update(order=4)
    ReviewStatus.objects.filter(code='excluded').update(order=5)


class Migration(migrations.Migration):

    dependencies = [
        ('document', '0191_auto_20200323_1551'),
        ('common', '0007_reviewstatus_group')
    ]

    operations = [
        migrations.RunPython(
            do_migrate,
            reverse_code=undo_migrate
        ),
    ]
