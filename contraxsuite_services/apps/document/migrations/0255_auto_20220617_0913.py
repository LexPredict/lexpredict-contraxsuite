# Generated by Django 2.2.28 on 2022-06-17 09:13

from django.db import migrations


def set_app_var(apps, description):
    AppVar = apps.get_model('common', 'AppVar')
    app_vars = AppVar.objects.filter(name='allow_duplicate_documents', category='Document')
    app_vars.update(description=description)


def migrate(apps, schema_editor):
    new_description = """If “true”, duplicated filenames will be uploaded, 
    but the second file will be named "copy 01", third file will be "copy 02", etc. 
    If marked “false”, files with the exact same name AND the exact same content will be blocked as duplicates. 
    Files with the same name but different content will be allowed."""
    set_app_var(apps, description=new_description)


def undo(apps, schema_editor):
    old_description = """If True, additional uploads of the same file name and same content 
    will be allowed and copy 01, copy 02, etc will be added to the name. 
    If False, you will get an error rejecting the upload of duplicate documents."""
    set_app_var(apps, description=old_description)


class Migration(migrations.Migration):

    dependencies = [
        ('document', '0254_auto_20220511_1444'),
    ]

    operations = [
        migrations.RunPython(
            migrate,
            reverse_code=undo
        ),
    ]
