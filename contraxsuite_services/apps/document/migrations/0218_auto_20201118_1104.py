# Generated by Django 2.2.13 on 2020-11-18 11:04

from django.db import migrations, models, connection


def do_migrate(_apps, _schema_editor):
    with connection.cursor() as cursor:
        cursor.execute(f'''
            UPDATE document_documentfield
            SET convert_decimals_to_floats_in_formula_args = true where formula is not null;''')


class Migration(migrations.Migration):
    dependencies = [
        ('document', '0217_auto_20201111_2137'),
    ]

    operations = [
        migrations.AddField(
            model_name='documentfield',
            name='convert_decimals_to_floats_in_formula_args',
            field=models.BooleanField(default=False,
                                      help_text='Floating point field values \n    are represented in Python Decimal type to avoid rounding problems in machine numbers representations. \n    Use this checkbox for converting them to Python float type before calculating the formula. \n    Float: 0.1 + 0.2 = 0.30000000000000004. Decimal: 0.1 + 0.2 = 0.3.'),
        ),
        migrations.AlterField(
            model_name='documentfield',
            name='type',
            field=models.CharField(db_index=True, default='string', max_length=30),
        ),
        migrations.RunPython(
            do_migrate, reverse_code=migrations.RunPython.noop
        )
    ]
